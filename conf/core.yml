#
# Default Settings
# ================
#

defaults: # default config
  version: 'collective-v0.0.10'
  vm: 'dev'
  cluster: 'base'
  ui: false
  universal_node_name: 'cluster_node' 
  universal_node_pem: 'cluster_node.pem'


#
# Location Settings
# ================
#

locations:
  base_boxes: 'base_boxes'
  init_scripts: 'manifests/init_scripts'
  downloads: 'manifests/downloads'
  repos: 'manifests/repos'
  cookbooks: 'manifests/repos/cookbooks'
  berkshelf: 'manifests/berkshelf'
  roles: 'manifests/roles'
  resources: 'manifests/resources'
  chef_client_keys: 'manifests/resources/chef_client'


#
# Download Settings
# ================
#

downloads:
  files:
    - file:
      name: 'ubuntu_12_04_lts.box'
      url: 'http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-vagrant-disk1.box'
      location: 'base_boxes'
      track: false
    - file:
      name: 'ubuntu_13_10.box'
      url: 'http://cloud-images.ubuntu.com/vagrant/saucy/current/saucy-server-cloudimg-amd64-vagrant-disk1.box'
      location: 'base_boxes'
      track: false
    - file:
      name: 'chefserver.deb'
      url: 'https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.8-1.ubuntu.12.04_amd64.deb'
      location: 'downloads'
      track: false


#
# Repo Settings
# ================
#
# ./repos/                      # where we keep misc repos
# ./repos/cookbooks             # cookbooks for local dev work (vagrant level)
#
repos:
  - repo:
    name: 'devstack'
    url: 'https://github.com/openstack-dev/devstack.git'
    tag: ''
    post_install: ''
    location: ''
  - repo:
    name: 'chef-server'
    url: 'https://github.com/JasonGiedymin/chef-server.git'
    tag: 'v2.0.1'
    post_install: ''
    location: 'cookbooks'
  - repo:
    name: 'git'
    url: 'https://github.com/opscode-cookbooks/git.git'
    tag: 'v2.7.0'
    post_install: ''
    location: 'cookbooks'
  - repo:
    name: 'chef-client'
    url: 'https://github.com/opscode-cookbooks/chef-client.git'
    tag: ''
    post_install: ''
    location: 'cookbooks'
  - repo:
    name: 'bind'
    url: 'https://github.com/atomic-penguin/cookbook-bind.git'
    tag: ''
    post_install: ''
    location: 'cookbooks'


#
# Cluster Settings
# ================
# NOTE: even though a chef node and nodes are specified here, the 
#       specific node entry must allow for chef_client or else
#       it will not be bootstrapped

clusters: # cluster config
  - cluster:
      name: 'base'
      nodes: 
        - 'node1' # nodes first
        - 'chef' # chef last as it will then knife across nodes
      bootstrap_nodes: # this is deprecated, use vagrant chef_client instead
        - 'node1' # deprecated
      chef_node: 'chef'
      user: 'vagrant'
      pass: 'vagrant'
        

#
# Node Settings
# ================
# Note: by setting `run_client` to true, it will expect a chef node
#       to be present

nodes:  # node registry
  - node:
      hostname: 'dns'
      box: 'dns'
      cpus: 1
      mem: 256
      ip: '10.10.10.01'
      mac: '02895C872CC5'
      url: 'ubuntu_13_04_lts.box'
      init: 'init.sh'
      roles:
        - 'internal-dns'
      run_client: false
      chef_node: ~

  - node:
      hostname: 'chef'
      box: 'chef'
      cpus: 1
      mem: 256
      ip: '10.10.10.10'
      mac: '080027EB6B03'
      url: 'ubuntu_12_04_lts.box'
      init: 'init.sh'
      roles:
        - 'chef-server'
      run_client: false
      chef_node: ~

  - node:
      hostname: 'dev'
      box: 'dev'
      cpus: 1
      mem: 2048
      ip: '10.10.10.11'
      mac: '0800d2FF88F2'
      url: 'ubuntu_13_04_lts.box'
      init: 'init.sh'
      roles: ~
      run_client: false
      chef_node: ~

  - node:
      hostname: 'node1'
      box: 'node1'
      cpus: 1
      mem: 256
      ip: '10.10.10.12'
      mac: '080027BE8715'
      url: 'ubuntu_12_04_lts.box'
      init: 'init.sh'
      roles:
        - 'cluster-node'
      run_client: false
      chef_node: chef

  - node:
      hostname: 'node2'
      box: 'node2'
      cpus: 1
      mem: 256
      ip: '10.10.10.13'
      mac: '02EECB9EC1ED'
      url: 'ubuntu_12_04_lts.box'
      init: 'init.sh'
      roles: ~
      run_client: true
      chef_node: chef

#
# Unused Mac
# ================
#
#   02D7DAEB3F8C
#   024E89B94036
#   0253943912A9
#   0277E25CD585
#   025EDFE84F7F
#   02882CFDC8F
#   0269347FC4C6
#
